import{an as m,y as w,X as v,r as E,n as T}from"./DEWgsSyj.js";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const k=()=>{};function G(h,n,l){var a;let t;T(l)?t={evaluating:l}:t=l||{};const{lazy:u=!1,flush:p="sync",evaluating:e=void 0,shallow:d=!0,onError:y=(a=globalThis.reportError)!==null&&a!==void 0?a:k}=t,c=v(!u),o=d?v(n):E(n);let r=0;return m(async g=>{if(!c.value)return;r++;const i=r;let f=!1;e&&Promise.resolve().then(()=>{e.value=!0});try{const s=await h(b=>{g(()=>{e&&(e.value=!1),f||b()})});i===r&&(o.value=s)}catch(s){y(s)}finally{e&&i===r&&(e.value=!1),f=!0}},{flush:p}),u?w(()=>(c.value=!0,o.value)):o}export{G as c};
