const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BXN2Tl0k.js","./BMXTT1Ib.js","./sZEEaFAO.js","./BQY1JlCk.js","./DEWgsSyj.js","./entry.CoEk2hAa.css","./TreeShakenIcon.GGO6IRWw.css","./SearchFilters.BqxBesBG.css","./Bvzfl0Te.js"])))=>i.map(i=>d[i]);
import{_ as me,o as i,aa as c,j as v,a,w as l,e as p,J as fe,ai as Q,aj as O,c as w,t as m,ag as b,ak as h,y as x,al as ke,am as be,r as T,v as P,f as xe,z as le,N as Ce,l as J,at as re,aB as Te,ab as H,m as we,a9 as Re,i as G,k as q,aC as Ae,b as Ee,d as oe,af as ie,ac as Ve,aD as $e,aE as ne,aF as ue,aG as ce,aH as de,as as ve,ad as ze}from"./DEWgsSyj.js";import{d as V}from"./BMXTT1Ib.js";import{T as S}from"./BQY1JlCk.js";import"./sZEEaFAO.js";const Ie={key:0,class:"filter-chips"},De={class:"filter-chips-header"},Ye={class:"filter-chips-container"},Me={key:0,class:"chip-group"},Le={key:1,class:"chip-group"},Qe={key:2,class:"chip-group"},Oe={key:3,class:"chip-group"},qe={key:4,class:"chip-group"},Pe={key:5,class:"chip-group"},Ne={key:6,class:"chip-group"},je={key:0,class:"filter-summary"},Be={class:"summary-text"},Ue={key:0},Ke={__name:"SearchFilterChips",props:{filters:{type:Object,default:()=>({})},resultCount:{type:Number,default:void 0}},emits:["remove-filter","clear-all"],setup(C,{emit:R}){const F=C,t=R,f=x(()=>r.value.categories&&r.value.categories.length>0||r.value.tags&&r.value.tags.length>0||r.value.postFormat||r.value.dateStart||r.value.dateEnd||!r.value.useSemanticSearch||r.value.maxResults&&r.value.maxResults!==10||r.value.useSemanticSearch&&r.value.similarityThreshold&&r.value.similarityThreshold!==.1),d=x(()=>{let y=0;return F.filters.categories&&(y+=F.filters.categories.length),F.filters.tags&&(y+=F.filters.tags.length),F.filters.postFormat&&(y+=1),(F.filters.dateStart||F.filters.dateEnd)&&(y+=1),y}),r=x(()=>F.filters),A=(y,n=null)=>{t("remove-filter",{type:y,value:n})},z=()=>{t("remove-filter",{type:"dateRange"})},I=()=>{t("clear-all")},D=(y,n)=>{if(y&&n){const _=V(y).format("MMM D, YYYY"),e=V(n).format("MMM D, YYYY");return`${_} - ${e}`}else{if(y)return`From ${V(y).format("MMM D, YYYY")}`;if(n)return`Until ${V(n).format("MMM D, YYYY")}`}return""};return(y,n)=>f.value?(i(),c("div",Ie,[v("div",De,[n[2]||(n[2]=v("span",{class:"filter-chips-title"},"Active Filters:",-1)),a(fe,{variant:"text",size:"small",color:"error",onClick:I,class:"clear-all-btn"},{default:l(()=>[...n[1]||(n[1]=[p(" Clear All ",-1)])]),_:1})]),v("div",Ye,[r.value.categories&&r.value.categories.length>0?(i(),c("div",Me,[n[3]||(n[3]=v("span",{class:"chip-group-label"},"Categories:",-1)),(i(!0),c(Q,null,O(r.value.categories,_=>(i(),w(b,{key:`category-${_}`,size:"small",color:"primary",variant:"flat",closable:"",class:"filter-chip","onClick:close":e=>A("categories",_)},{default:l(()=>[a(S,{icon:"mdi-folder-outline"}),p(" "+m(_),1)]),_:2},1032,["onClick:close"]))),128))])):h("",!0),r.value.tags&&r.value.tags.length>0?(i(),c("div",Le,[n[4]||(n[4]=v("span",{class:"chip-group-label"},"Tags:",-1)),(i(!0),c(Q,null,O(r.value.tags,_=>(i(),w(b,{key:`tag-${_}`,size:"small",color:"secondary",variant:"flat",closable:"",class:"filter-chip","onClick:close":e=>A("tags",_)},{default:l(()=>[a(S,{icon:"mdi-tag-outline"}),p(" "+m(_),1)]),_:2},1032,["onClick:close"]))),128))])):h("",!0),r.value.postFormat?(i(),c("div",Qe,[n[5]||(n[5]=v("span",{class:"chip-group-label"},"Format:",-1)),a(b,{size:"small",color:"warning",variant:"flat",closable:"",class:"filter-chip","onClick:close":n[0]||(n[0]=_=>A("postFormat"))},{default:l(()=>[a(S,{icon:"mdi-file-document-outline"}),p(" "+m(r.value.postFormat),1)]),_:1})])):h("",!0),r.value.dateStart||r.value.dateEnd?(i(),c("div",Oe,[n[6]||(n[6]=v("span",{class:"chip-group-label"},"Date:",-1)),a(b,{size:"small",color:"success",variant:"flat",closable:"",class:"filter-chip","onClick:close":z},{default:l(()=>[a(S,{icon:"mdi-calendar-range"}),p(" "+m(D(r.value.dateStart,r.value.dateEnd)),1)]),_:1})])):h("",!0),r.value.useSemanticSearch?h("",!0):(i(),c("div",qe,[n[8]||(n[8]=v("span",{class:"chip-group-label"},"Mode:",-1)),a(b,{size:"small",color:"info",variant:"outlined",class:"filter-chip"},{default:l(()=>[a(S,{icon:"mdi-text-search"}),n[7]||(n[7]=p(" Keyword Search ",-1))]),_:1})])),r.value.maxResults&&r.value.maxResults!==10?(i(),c("div",Pe,[n[9]||(n[9]=v("span",{class:"chip-group-label"},"Limit:",-1)),a(b,{size:"small",color:"grey",variant:"outlined",class:"filter-chip"},{default:l(()=>[a(S,{icon:"mdi-numeric"}),p(" "+m(r.value.maxResults)+" results ",1)]),_:1})])):h("",!0),r.value.useSemanticSearch&&r.value.similarityThreshold&&r.value.similarityThreshold!==.1?(i(),c("div",Ne,[n[10]||(n[10]=v("span",{class:"chip-group-label"},"Threshold:",-1)),a(b,{size:"small",color:"purple",variant:"outlined",class:"filter-chip"},{default:l(()=>[a(S,{icon:"mdi-speedometer"}),p(" "+m((r.value.similarityThreshold*100).toFixed(0))+"% similarity ",1)]),_:1})])):h("",!0)]),d.value>0?(i(),c("div",je,[a(S,{icon:"mdi-information-outline",size:"16"}),v("span",Be,[p(m(d.value)+" filter"+m(d.value>1?"s":"")+" applied ",1),C.resultCount!==void 0?(i(),c("span",Ue," â€¢ "+m(C.resultCount)+" result"+m(C.resultCount!==1?"s":"")+" found ",1)):h("",!0)])])):h("",!0)])):h("",!0)}},Je=me(Ke,[["__scopeId","data-v-ef823342"]]),He=()=>{const C=ke(),R=be(),F=()=>{const e=C.query;return{categories:e.categories?Array.isArray(e.categories)?e.categories:[e.categories]:[],tags:e.tags?Array.isArray(e.tags)?e.tags:[e.tags]:[],postFormats:e.postFormats?Array.isArray(e.postFormats)?e.postFormats:[e.postFormats]:[],postFormat:e.postFormat||"",dateStart:e.dateStart||"",dateEnd:e.dateEnd||"",useSemanticSearch:e.useSemanticSearch!=="false",maxResults:parseInt(e.maxResults)||10,similarityThreshold:parseFloat(e.similarityThreshold)||.1,searchQuery:e.q||""}},t=T(F()),f=x(()=>{const e={};return t.value.categories.length>0&&(e.categories=t.value.categories),t.value.tags.length>0&&(e.tags=t.value.tags),t.value.postFormats.length>0&&(e.postFormats=t.value.postFormats),t.value.postFormat&&(e.postFormat=t.value.postFormat),t.value.dateStart&&(e.dateStart=t.value.dateStart),t.value.dateEnd&&(e.dateEnd=t.value.dateEnd),t.value.useSemanticSearch||(e.useSemanticSearch="false"),t.value.maxResults!==10&&(e.maxResults=t.value.maxResults.toString()),t.value.similarityThreshold!==.1&&(e.similarityThreshold=t.value.similarityThreshold.toString()),t.value.searchQuery&&(e.q=t.value.searchQuery),e}),d=(e={})=>{const o={...f.value,...e};Object.keys(o).forEach(k=>{(!o[k]||Array.isArray(o[k])&&o[k].length===0)&&delete o[k]}),R.push({path:C.path,query:o})},r=e=>{t.value={...t.value,...e}},A=()=>{t.value={categories:[],tags:[],postFormats:[],postFormat:"",dateStart:"",dateEnd:"",useSemanticSearch:!0,maxResults:10,similarityThreshold:.1,searchQuery:t.value.searchQuery}},z=({type:e,value:o})=>{switch(e){case"categories":const k=t.value.categories.indexOf(o);k>-1&&t.value.categories.splice(k,1);break;case"tags":const $=t.value.tags.indexOf(o);$>-1&&t.value.tags.splice($,1);break;case"postFormat":t.value.postFormat="",t.value.postFormats=[];break;case"dateRange":t.value.dateStart="",t.value.dateEnd="";break}},I=e=>{t.value.searchQuery=e},D=x(()=>t.value.categories.length>0||t.value.tags.length>0||t.value.postFormat||t.value.dateStart||t.value.dateEnd||!t.value.useSemanticSearch||t.value.maxResults!==10),y=x(()=>{let e=0;return e+=t.value.categories.length,e+=t.value.tags.length,t.value.postFormat&&(e+=1),(t.value.dateStart||t.value.dateEnd)&&(e+=1),e});P(t,()=>{d()},{deep:!0}),P(()=>C.query,e=>{if(C.path==="/search"){const o=F();Object.assign(t.value,o)}},{immediate:!1});const n=()=>{if(typeof window<"u")try{const e={useSemanticSearch:t.value.useSemanticSearch,maxResults:t.value.maxResults,similarityThreshold:t.value.similarityThreshold};localStorage.setItem("searchFilters",JSON.stringify(e))}catch(e){console.warn("Failed to save filters to localStorage:",e)}},_=()=>{if(typeof window<"u")try{const e=localStorage.getItem("searchFilters");if(e){const o=JSON.parse(e);t.value.useSemanticSearch=o.useSemanticSearch??!0,t.value.maxResults=o.maxResults??10,t.value.similarityThreshold=o.similarityThreshold??.1}}catch(e){console.warn("Failed to load filters from localStorage:",e)}};return{filters:x(()=>t.value),updateFilters:r,clearFilters:A,removeFilter:z,setSearchQuery:I,hasActiveFilters:D,activeFilterCount:y,saveFiltersToStorage:n,loadFiltersFromStorage:_,updateURL:d}},Ge={class:"search-component"},We={key:0,class:"filters-panel mt-4"},Xe={key:0,class:"search-results"},Ze={key:0},et={key:0},tt={key:1},at={class:"result-meta-chips"},st={key:0,class:"text-center pa-4"},lt={key:1},rt={class:"result-meta"},ot={key:0,class:"result-categories mt-1"},it={key:2,class:"text-center pa-4"},nt={class:"mt-2"},ut={key:1,class:"recent-posts"},ct={__name:"SearchComponent",async setup(C){let R,F;const t=ze(()=>le(()=>import("./BXN2Tl0k.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url));let f=null;typeof window<"u"&&(f=([R,F]=xe(()=>le(()=>import("./Bvzfl0Te.js"),__vite__mapDeps([8,2]),import.meta.url)),R=await R,F(),R).searchService);const{filters:d,updateFilters:r,clearFilters:A,removeFilter:z,setSearchQuery:I,hasActiveFilters:D,activeFilterCount:y,loadFiltersFromStorage:n,saveFiltersToStorage:_}=He(),e=T(d.value.searchQuery||""),o=T(null),k=T(!1),$=T(!1),N=T([]),j=T({categories:[],tags:[]}),Y=T({}),M=T({}),W=T({}),pe=x(()=>j.value.categories),he=x(()=>j.value.tags),ge=x(()=>{if(f&&f.searchIndex){const u=new Set;return f.searchIndex.forEach(s=>{s["post-format"]?.name&&u.add(s["post-format"].name)}),Array.from(u).sort()}return[]}),B=x(()=>D.value),X=x(()=>y.value);let U=null;const ye=()=>{U&&clearTimeout(U),U=setTimeout(()=>{e.value.length>2?E():o.value=null},500)},E=async()=>{if(!e.value.trim()||typeof window>"u"){o.value=null;return}k.value=!0;try{const u={limit:d.value.maxResults,threshold:d.value.similarityThreshold,useSemanticSearch:d.value.useSemanticSearch,categories:d.value.categories,tags:d.value.tags,postFormat:d.value.postFormat,dateStart:d.value.dateStart,dateEnd:d.value.dateEnd};if(f){let s=await f.search(e.value,u);(u.dateStart||u.dateEnd)&&(s.results=s.results.filter(g=>{const L=V(g.date),ae=u.dateStart?V(u.dateStart):null,se=u.dateEnd?V(u.dateEnd):null;return!(ae&&L.isBefore(ae)||se&&L.isAfter(se))}),s.totalResults=s.results.length),o.value=s}}catch(u){console.error("Search failed:",u)}finally{k.value=!1}},Z=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Se=async()=>{if(typeof window<"u"&&f)try{await f.initialize(),j.value=f.getSuggestions(),N.value=f.getRecentPosts(5),ee()}catch(u){console.error("Failed to load suggestions:",u)}},ee=()=>{if(!f||!f.searchIndex)return;const u=f.getFilterCounts();Y.value=u.categories,M.value=u.tags,W.value=u.postFormats,K()},K=()=>{if(!f||!f.searchIndex)return;const u=f.getViableFilterCombinations(d.value);Object.keys(Y.value).forEach(s=>{u.categories[s]?Y.value[s]=u.categories[s]:Y.value[s]=0}),Object.keys(M.value).forEach(s=>{u.tags[s]?M.value[s]=u.tags[s]:M.value[s]=0})},Fe=u=>{r(u),K(),e.value.trim()&&E()},_e=({type:u,value:s})=>{z({type:u,value:s}),K(),e.value.trim()&&E()},te=()=>{A(),ee(),e.value.trim()&&E()};return Ce(()=>{n(),Se(),d.value.searchQuery&&(e.value=d.value.searchQuery,E())}),P(e,u=>{I(u)}),P(d,()=>{e.value.trim()&&E(),_()},{deep:!0}),(u,s)=>(i(),c("div",Ge,[a(q,{class:"search-card",elevation:"2"},{default:l(()=>[a(J,{class:"search-header"},{default:l(()=>[a(S,{icon:"mdi-magnify",class:"search-icon"}),s[3]||(s[3]=v("span",null,"AI-Powered Search",-1)),a(re),a(fe,{variant:"text",size:"small",onClick:s[0]||(s[0]=g=>$.value=!$.value),color:B.value?"primary":"default"},{default:l(()=>[a(S,{icon:"mdi-filter-variant"}),s[2]||(s[2]=p(" Filters ",-1)),X.value>0?(i(),w(Te,{key:0,content:X.value,color:"primary",inline:""},null,8,["content"])):h("",!0)]),_:1},8,["color"])]),_:1}),a(H,null,{default:l(()=>[a(we,{modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=g=>e.value=g),label:"Search posts with natural language...",placeholder:"e.g., 'AI research papers about transformers' or 'engineering management'",variant:"outlined",loading:k.value,onInput:ye,onKeyup:Re(E,["enter"]),clearable:"",class:"search-input"},null,8,["modelValue","loading"]),B.value?(i(),w(Je,{key:0,filters:G(d),"result-count":o.value?.totalResults,onRemoveFilter:_e,onClearAll:te},null,8,["filters","result-count"])):h("",!0)]),_:1})]),_:1}),a($e,null,{default:l(()=>[$.value?(i(),c("div",We,[(i(),w(Ae,null,{fallback:l(()=>[a(q,{class:"filters-loading pa-4",elevation:"1"},{default:l(()=>[a(Ee,{class:"align-center"},{default:l(()=>[a(oe,{cols:"auto"},{default:l(()=>[a(ie,{indeterminate:"",color:"primary",size:"20"})]),_:1}),a(oe,null,{default:l(()=>[...s[4]||(s[4]=[v("span",{class:"text-body-2"},"Loading advanced filters...",-1)])]),_:1})]),_:1}),a(Ve,{class:"mt-3",type:"chip, chip, divider, chip, chip"})]),_:1})]),default:l(()=>[a(G(t),{"available-categories":pe.value,"available-tags":he.value,"available-post-formats":ge.value,"category-counts":Y.value,"tag-counts":M.value,"post-format-counts":W.value,"initial-filters":G(d),"onUpdate:filters":Fe,onClearAll:te},null,8,["available-categories","available-tags","available-post-formats","category-counts","tag-counts","post-format-counts","initial-filters"])]),_:1}))])):h("",!0)]),_:1}),o.value||k.value?(i(),c("div",Xe,[a(q,{class:"results-card mt-4",elevation:"1"},{default:l(()=>[a(J,{class:"results-header"},{default:l(()=>[a(S,{icon:"mdi-file-search",class:"results-icon"}),o.value?(i(),c("span",Ze,[p(m(o.value.totalResults)+" results ",1),o.value.query?(i(),c("span",et,'for "'+m(o.value.query)+'"',1)):h("",!0)])):(i(),c("span",tt,"Searching...")),a(re),v("div",at,[o.value?(i(),w(b,{key:0,color:o.value.searchType==="semantic"?"primary":"secondary",size:"small",class:"mr-2"},{default:l(()=>[p(m(o.value.searchType==="semantic"?"AI Semantic":"Keyword"),1)]),_:1},8,["color"])):h("",!0),o.value&&B.value?(i(),w(b,{key:1,color:"info",size:"small"},{default:l(()=>[...s[5]||(s[5]=[p(" Filtered ",-1)])]),_:1})):h("",!0)])]),_:1}),a(H,null,{default:l(()=>[k.value?(i(),c("div",st,[a(ie,{indeterminate:"",color:"primary"}),s[6]||(s[6]=v("p",{class:"mt-2"},"Analyzing your query with AI...",-1))])):o.value&&o.value.results.length>0?(i(),c("div",lt,[a(ne,{lines:"three"},{default:l(()=>[(i(!0),c(Q,null,O(o.value.results,g=>(i(),w(ue,{key:g.id,to:g.url,class:"search-result-item"},{prepend:l(()=>[a(ve,{color:"primary",size:"40"},{default:l(()=>[a(S,{icon:"mdi-file-document"})]),_:1})]),append:l(()=>[v("div",rt,[a(b,{size:"small",variant:"outlined",color:"primary",class:"mb-1"},{default:l(()=>[p(m(Z(g.date)),1)]),_:2},1024),s[7]||(s[7]=v("br",null,null,-1)),a(b,{size:"small",variant:"outlined",color:"secondary"},{default:l(()=>[p(m(Math.round(g.score*100))+"% match ",1)]),_:2},1024),s[8]||(s[8]=v("br",null,null,-1)),g.categories&&g.categories.length>0?(i(),c("div",ot,[(i(!0),c(Q,null,O(g.categories.slice(0,2),L=>(i(),w(b,{key:L,size:"x-small",variant:"outlined",color:"info",class:"mr-1 mb-1"},{default:l(()=>[p(m(L),1)]),_:2},1024))),128))])):h("",!0)])]),default:l(()=>[a(ce,{class:"result-title"},{default:l(()=>[p(m(g.title),1)]),_:2},1024),a(de,{class:"result-content"},{default:l(()=>[p(m(g.content),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})])):o.value&&o.value.results.length===0?(i(),c("div",it,[a(S,{icon:"mdi-magnify-close",size:"48",color:"grey"}),v("p",nt,'No results found for "'+m(o.value.query)+'"',1),s[9]||(s[9]=v("p",{class:"text-body-2 text-grey"},"Try different keywords or use semantic search",-1))])):h("",!0)]),_:1})]),_:1})])):h("",!0),!o.value&&!k.value&&N.value.length>0?(i(),c("div",ut,[a(q,{class:"recent-card mt-4",elevation:"1"},{default:l(()=>[a(J,{class:"recent-header"},{default:l(()=>[a(S,{icon:"mdi-clock-outline",class:"recent-icon"}),s[10]||(s[10]=v("span",null,"Recent Posts",-1))]),_:1}),a(H,null,{default:l(()=>[a(ne,null,{default:l(()=>[(i(!0),c(Q,null,O(N.value,g=>(i(),w(ue,{key:g.id,to:g.url,class:"recent-post-item"},{prepend:l(()=>[a(ve,{color:"secondary",size:"32"},{default:l(()=>[a(S,{icon:"mdi-file-document",size:"16"})]),_:1})]),default:l(()=>[a(ce,{class:"recent-title"},{default:l(()=>[p(m(g.title),1)]),_:2},1024),a(de,null,{default:l(()=>[p(m(Z(g.date)),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})]),_:1})]),_:1})])):h("",!0)]))}},pt=me(ct,[["__scopeId","data-v-ddd03d7c"]]);export{pt as default};
